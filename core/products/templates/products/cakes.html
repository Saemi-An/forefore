{% extends 'base.html' %}
{% load customtags %}


{% block modal %}
<!-- ì¼ë°˜ ëª¨ë‹¬ -->
<div class="modal" id="normalModal">
  <div class="modal__cnt">
    {% if sales %}
    <p class="lg-bold">ğŸŒ™ ì˜ˆì•½ íŒë§¤ ë§ˆê° ğŸŒ™</p>
    <div class="modal__cnt__txt">
      <div>
        <p class="md-reg">ê´€ë¦¬ì í˜ì´ì§€ì—ì„œ</p>
        <p class="md-reg"><span class="md-bold txt-color-blue">ì„ íƒëœ í”½ì—…ì‹œê°„ì´ ì´ˆê¸°í™” ë©ë‹ˆë‹¤.</span></p>
      </div>
      <div>
        <p class="md-reg">ì‚¬ìš©ì í˜ì´ì§€ì—ì„œ</p>
        <p class="md-reg"><span class="md-bold txt-color-blue">í”½ì—… ì‹œê°„ ì„ íƒë€ì´ ì´ˆê¸°í™” ë©ë‹ˆë‹¤.</span></p>
      </div>
      <div>
        <p class="md-reg">ì˜¤ëŠ˜ì˜ êµ¬ì›€ê³¼ì íŒë§¤ë¥¼</p>
        <p class="md-reg">ì¢…ë£Œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
      </div>
    </div>
    {% else %}
    <p class="lg-bold">âœ¨ ì˜ˆì•½ íŒë§¤ ì‹œì‘ âœ¨</p>
    <div class="modal__cnt__txt">
      <div>
        <p class="md-reg">íŒë§¤ ì¤‘ì—ëŠ”</p>
        <p class="md-reg"><span class="md-bold txt-color-orange">í”½ì—…ì‹œê°„ ë³€ê²½ì´ ë¶ˆê°€ëŠ¥</span> í•©ë‹ˆë‹¤.</p>
      </div>
      <div>
        <p class="md-reg">ì˜¤ëŠ˜ì˜ êµ¬ì›€ê³¼ì íŒë§¤ë¥¼</p>
        <p class="md-reg">ì‹œì‘ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
      </div>
    </div>
    {% endif %}
    <div class="modal__cnt__btn">
      <button type="button" class="md-reg btn-normal txt-color-green" onclick="closeNormalModal()">ì·¨ì†Œ</button>
      <button class="md-reg btn-green txt-color-white" onclick="location.href='{% url 'change_cookies_sale' %}'">í™•ì¸</button>
    </div>
  </div>
</div>
{% endblock %}

{% block main %}
<!-- ê²€ìƒ‰ ì„¹ì…˜ -->
<section class="paper {% if sales %}on-sale{% endif %}">
  <div class="search">
    <p class="lg-bold">íŒë§¤ ì„¤ì •</p>
    <!-- ì¸í’‹ -->
    <div class="search__mid">
      <div class="search__mid__box">
        <p class="md-bold">íŒë§¤ ìƒíƒœ</p>
        <input type="text" class="md-bold search__mid__box no-input txt-color-{% if sales %}orange{% else %}navy{% endif %}" value="{% if sales %}ì˜ˆì•½ íŒë§¤ì¤‘{% else %}ì˜ˆì•½ íŒë§¤ ì¢…ë£Œ{% endif %}">
      </div>
    </div>
    <!-- ë²„íŠ¼ -->
    <div class="search__btn align right">
      <button class="emoji-btn green" onclick="showNormalModal()">
        <div class="div_with_emoji">
          <span class="md-reg emoji_mgb02">ğŸ›ï¸</span>
          <span class="md-reg txt-color-white">íŒë§¤ ìƒíƒœ ë³€ê²½</span>
        </div>
      </button>
    </div>
  </div>
</section>

<!-- í…Œì´ë¸” ì„¹ì…˜ -->
<section class="paper {% if sales %}on-sale{% endif %}">
  <div class="table">
    <!-- ìƒë‹¨ -->
    <div class="align both table__top">
      <span class="lg-bold">íŒë§¤ ìƒí’ˆ ëª©ë¡</span>
      <button class="emoji-btn green" onclick="location.href='{% url 'cakes_add_and_edit' 0 %}'">
        <div class="div_with_emoji">
          <span class="lg-reg emoji_mgb02">âœ¨</span>
          <span class="md-reg txt-color-white">íŒë§¤ ìƒí’ˆ ì¶”ê°€</span>
        </div>
      </button>
    </div>
    <!-- ì¤‘ë‹¨ -->
    <table class="table__table">
      <colgroup>
        <col style="width: 5%;">  <!-- ìˆœì„œ -->
        <col style="width: 10%;">  <!-- ìˆœì„œ ë³€ê²½ -->
        <col style="width: 7%;">  <!-- ì´ë¯¸ì§€ -->

        <col style="width: 18%;">  <!-- ìƒí’ˆëª… -->
        <col style="width: 30%;">  <!-- í”½ì—… ì‹œê°„ -->
        <col style="width: 18%;">  <!-- ë…¸ì¶œ ìƒíƒœ -->

        <col style="width: 12%;">  <!-- ê¸°ëŠ¥ -->
      </colgroup>
      <thead {% if sales %}class="on-sale"{% endif %}>
        <tr>
          <th class="md-bold">ìˆœì„œ</th>
          <th class="md-bold">ìˆœì„œ ë³€ê²½</th>
          <th class="md-bold">ì´ë¯¸ì§€</th>
          <th class="md-bold">ìƒí’ˆëª…</th>
          <th class="md-bold">ë…¸ì¶œ ìƒíƒœ</th>
          <th class="md-bold">í”½ì—… ì‹œê°„</th>
          <th class="md-bold">ê¸°ëŠ¥</th>
        </tr>
      </thead>
      <tbody {% if sales %}class="on-sale"{% endif %}>
        {% for cake in cakes %}
        <tr>
          <td class="md-reg">{{ cake.index }}</td>
          <td class="md-reg">
            <div class="table__table__index">
              <button class="table__table__index__thumb" onclick="location.href='{% url 'change_cookies_index' cake.index 'up' %}'">ğŸ‘ğŸ½</button>
              <button class="table__table__index__thumb" onclick="location.href='{% url 'change_cookies_index' cake.index 'down' %}'">ğŸ‘ğŸ¼</button>
            </div>
          </td>
          <td>
            <img src="/admin_media/{{ cake.img }}" alt="" class="table__table__img">
          </td>
          <td class="md-reg">{{ cake.name }}</td>
          <td class="md-reg">ì—¬ê¸° ìŠ¤ì¼€ì¥´'ë“¤' ë“¤ì–´ê°ˆ ê³³</td>
          <td class="md-reg">
            {% if cake.display == 0 %}
              âšªï¸ {{ cake.get_display_display }}   <!-- íŒë§¤ ëŒ€ê¸°ì¤‘ -->
            {% elif cake.display == 1 %}
              ğŸŸ¢ {{ cake.get_display_display }}   <!-- íŒë§¤ì¤‘ -->
            {% elif cake.display == 2 %}
              ğŸŸ¡ {{ cake.get_display_display }}   <!-- ì¬ê³  ì†Œì§„ -->
            {% elif cake.display == 3 %}
              âš«ï¸ {{ cake.get_display_display }}   <!-- ì‹œì¦Œ ì¢…ë£Œ -->
            {% endif %}
          </td>
          <td class="">
            <div class="table__table__functions">
              <button class="lg-reg" onclick="location.href='{% url 'cookies_view' cake.id %}'">ğŸ‘€</button>
              <button class="lg-reg" onclick="location.href='{% url 'cakes_add_and_edit' cake.id %}'">âœğŸ½</button>
              <button class="lg-reg" onclick="location.href='{% url 'cookies_delete' cake.id %}'">ğŸ—‘ï¸</button>
            </div>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <!-- í•˜ë‹¨ -->
    <div class="align center">
      <ul class="table__paging">
      {% if cakes.has_previous %}
        <li class="align center"><button class="lg-bold" onclick="location.href='?page=1'" title="ì²˜ìŒìœ¼ë¡œ">ğŸ‘ˆğŸ½</button></li>
      {% endif %}

      {% for page_num in cakes.paginator.page_range %}
        {% if page_num >= cakes.number|add:-4 and page_num <= cakes.number|add:4 %}
        {% if page_num == cakes.number %}
        <li><button class="align center md-reg table__paging__btn active" onclick="location.href='?page={{ page_num }}'">{{ page_num }}</button></li>
        {% else %}
        <li><button class="align center md-reg table__paging__btn" onclick="location.href='?page={{ page_num }}'">{{ page_num }}</button></li>
        {% endif %}
        {% endif %}
      {% endfor %}

      {% if cakes.has_next %}
        <li class="align center"><button class="lg-bold" onclick="location.href='?page={{ cakes.paginator.num_pages }}'" title="ë§ˆì§€ë§‰ìœ¼ë¡œ">ğŸ‘‰ğŸ½</button></li>
      {% endif %}
      </ul>
    </div>
  </div>
</section>
{% endblock %}