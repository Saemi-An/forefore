{% extends 'base.html' %}
{% load customtags %}

{% block main %}
<section class="paper">
  <div class="table">
    <!-- ìƒë‹¨ -->
    <div class="align both table__top">
      <span class="lg-bold">í”½ì—…ì‹œê°„ ëª©ë¡</span>
      <button class="emoji-btn green" onclick="location.href='{% url 'cakes_schedules_add' 0 %}'">
        <div class="div_with_emoji">
          <span class="lg-reg emoji_mgb02">âœ¨</span>
          <span class="md-reg txt-color-white">í”½ì—…ì‹œê°„ ì¶”ê°€</span>
        </div>
      </button>
    </div>
    <!-- ì¤‘ë‹¨ -->
    <table class="table__table">
      <colgroup>
        <col style="width: 5%;">  <!-- ë²ˆí˜¸ -->
        <col style="width: 35%;">  <!-- í”½ì—…ì‹œê°„ ì´ë¦„ -->
        <col style="width: 15%;">  <!-- ì˜ˆì•½ ì‹œì‘ì¼ -->
        <col style="width: 15%;">  <!-- ì˜ˆì•½ ë§ˆê°ì¼ -->
        <col style="width: 15%;">  <!-- ì˜ˆì•½ ê°€ëŠ¥ ìš”ì¼ -->
        <col style="width: 12%;">  <!-- ê¸°ëŠ¥ -->
      </colgroup>
      <thead>
        <tr>
          <th class="md-bold">ë²ˆí˜¸</th>
          <th class="md-bold">í”½ì—…ì‹œê°„ ì´ë¦„</th>
          <th class="md-bold">ì˜ˆì•½ ì‹œì‘ì¼</th>
          <th class="md-bold">ì˜ˆì•½ ë§ˆê°ì¼</th>
          <th class="md-bold">ì˜ˆì•½ ê°€ëŠ¥ ìš”ì¼</th>
          <th class="md-bold">ê¸°ëŠ¥</th>
        </tr>
      </thead>
      <tbody>
        {% for schedule in schedules %}
        <tr>
          <td class="md-reg">{{ forloop.counter }}</td>
          <td class="md-reg">{{ schedule.name }}</td>
          <td class="md-reg">{{ schedule.start_date | format_date }}</td>
          <td class="md-reg">{{ schedule.end_date | format_date }}</td>
          <td class="md-reg">{{ schedule.days | get_days_from_bitmask }}</td>
          <td>
            <div class="table__table__functions">
              <button class="lg-reg" onclick="location.href='{% url 'cakes_schedules_view' schedule.pk %}'">ğŸ‘€</button>
              <button class="lg-reg" onclick="location.href='{% url 'cakes_schedules_add' schedule.pk %}'">âœğŸ½</button>
              <button class="lg-reg" onclick="location.href='{% url 'cakes_schedules_delete' schedule.pk %}'">ğŸ—‘ï¸</button>
            </div>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <!-- í•˜ë‹¨ -->
    <div class="align center">
      <ul class="table__paging">
      {% if schedules.has_previous %}
        <li class="align center"><button class="lg-bold" onclick="location.href='?page=1'" title="ì²˜ìŒìœ¼ë¡œ">ğŸ‘ˆğŸ½</button></li>
      {% endif %}

      {% for page_num in schedules.paginator.page_range %}
        {% if page_num >= schedules.number|add:-4 and page_num <= schedules.number|add:4 %}
        {% if page_num == schedules.number %}
        <li><button class="align center md-reg table__paging__btn active" onclick="location.href='?page={{ page_num }}'">{{ page_num }}</button></li>
        {% else %}
        <li><button class="align center md-reg table__paging__btn" onclick="location.href='?page={{ page_num }}'">{{ page_num }}</button></li>
        {% endif %}
        {% endif %}
      {% endfor %}

      {% if schedules.has_next %}
        <li class="align center"><button class="lg-bold" onclick="location.href='?page={{ schedules.paginator.num_pages }}'" title="ë§ˆì§€ë§‰ìœ¼ë¡œ">ğŸ‘‰ğŸ½</button></li>
      {% endif %}
      </ul>
    </div>
  </div>
</section>
{% endblock %}